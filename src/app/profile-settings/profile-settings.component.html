<app-header></app-header>
<div class="example-action-buttons">
  <h1>
    <button mat-button (click)="accordion.openAll()">Expand All</button>
    <button mat-button (click)="accordion.closeAll()">Collapse All</button>
  </h1>
</div>
<mat-accordion class="example-headers-align" multi>
  <div class="registrationLayout">
    <mat-card class="registrationCard" [class.mat-elevation-z10]="true">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
           <h1> Personal Information</h1>
          </mat-panel-title>
          <mat-panel-description>
            Edit your full name and mobile number
            <mat-icon>account_circle</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutGap="0.5" justi>
          <form [formGroup]="signupForm" (ngSubmit)="submitUserName()">
            <mat-label>First Name : </mat-label>
            <span *ngIf="!makeFirstNameEditable"> {{firstName}}</span>
            <mat-form-field *ngIf="makeFirstNameEditable" appearance="outline">
              <input matInput type="text" required placeholder="Enter your full name" formControlName="firstName"
                id="firstName" [(ngModel)]="firstName" />
              <mat-icon matPrefix>account_circle</mat-icon>
              <mat-error *ngIf="hasError('firstName', 'required')">First Name is required</mat-error>
            </mat-form-field>
            <button *ngIf="!makeFirstNameEditable" mat-raised-button color="primary" type="button"
              (click)="editUserName()">Edit</button>
            <button *ngIf="makeFirstNameEditable" mat-raised-button color="primary" type="submit">Save</button>
            <button *ngIf="makeFirstNameEditable" mat-raised-button color="primary" type="button"
              (click)="submitUserName()">Cancel</button>
          </form>
        </div>

        <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutGap="0.5">
          <form [formGroup]="contactNumberForm" (ngSubmit)="submitContactNumber()">
            <mat-label>Contact Number : </mat-label>
            <span *ngIf="!makeContactNumberEditable"> {{contactNum}}</span>
            <mat-form-field *ngIf="makeContactNumberEditable" appearance="outline">
              <input matInput type="text" required placeholder="Enter your full name" formControlName="mobileNum"
                id="contactNum" [(ngModel)]="contactNum" />
              <mat-icon matPrefix> contact_phone</mat-icon>
              <mat-error *ngIf="hasErrorInContactNum('mobileNum', 'required')">Contact Number is required</mat-error>
              <mat-error *ngIf="hasErrorInContactNum('mobileNum', 'minlength')">10 digit contact number is required
              </mat-error>
              <mat-error *ngIf="hasErrorInContactNum('mobileNum', 'maxlength')">10 digit contact number is required
              </mat-error>
              <mat-error *ngIf="hasErrorInContactNum('mobileNum', 'pattern')">Contact number should be a digit
              </mat-error>
            </mat-form-field>
            <button *ngIf="!makeContactNumberEditable" mat-raised-button color="primary" type="button"
              (click)="editContactNumber()">Edit</button>
            <button *ngIf="makeContactNumberEditable" mat-raised-button color="primary" type="submit">Save</button>
            <button *ngIf="makeContactNumberEditable" mat-raised-button color="primary" type="button"
              (click)="submitContactNumber()">Cancel</button>
          </form>
        </div>
      </mat-expansion-panel>
    </mat-card>
  </div>
  <div class="registrationLayout">
    <mat-card class="registrationCard" [class.mat-elevation-z10]="true">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <h1>Password Management</h1>
          </mat-panel-title>
          <mat-panel-description>
            Change password
            <mat-icon>lock</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>

        <div class="container" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center" fxLayoutGap="0.5">
          <form [formGroup]="passwordChangeForm" (ngSubmit)="submitPassword()">
            <div fxFlex="50%">
              <mat-form-field appearance="outline">
                <mat-label>Password</mat-label>
                <input matInput [type]="hide ? 'password' : 'text'" required placeholder="Enter your password"
                  formControlName="password" id="password" minlength="8" />
                <mat-icon matPrefix>lock</mat-icon>
                <mat-icon matSuffix (click)="hide = !hide" style="cursor: pointer;">
                  {{ hide ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="hasErrorInChangePassword('password', 'required')">Password is required</mat-error>
                <mat-error *ngIf="hasErrorInChangePassword('password', 'minlength')">The minimum length is 8 characters
                </mat-error>
              </mat-form-field>
            </div>
            <div fxFlex="50%">
              <mat-form-field appearance="outline">
                <mat-label>Confirm Password</mat-label>
                <input matInput [type]="hide ? 'password' : 'text'" placeholder="Confirm your password"
                  formControlName="confirmPassword" id="confirmPassword" [errorStateMatcher]="matcher" />
                <mat-icon matPrefix>lock</mat-icon>
                <mat-icon matSuffix (click)="hide = !hide" style="cursor: pointer;">
                  {{ hide ? "visibility_off" : "visibility" }}</mat-icon>
                <mat-error *ngIf="passwordChangeForm.hasError('notSame')">
                  Passwords do not match
                </mat-error>
              </mat-form-field>
            </div>
            <button mat-raised-button color="primary" type="submit">Save</button>
          </form>
        </div>
      </mat-expansion-panel>
    </mat-card>
  </div>
  <div class="registrationLayout">
    <mat-card class="registrationCard" [class.mat-elevation-z10]="true">
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            <h1>Delete Account</h1>
          </mat-panel-title>
          <mat-panel-description>
            Delete your account along with all saved universities list
            <mat-icon>delete_forever</mat-icon>
          </mat-panel-description>
        </mat-expansion-panel-header>
        <button mat-raised-button color="warn">Delete account</button>
      </mat-expansion-panel>
    </mat-card>
  </div>
</mat-accordion>